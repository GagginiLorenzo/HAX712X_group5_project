import requests
import json

class DataApi:
    def __init__(self, url_api):
        self.url_api = url_api
        self.donnees = None
        self.charger_donnees()

    def charger_donnees(self):
        # Faire une requête à l'API
        reponse = requests.get(self.url_api)

        # Vérifier si la requête a réussi (statut 200)
        if reponse.status_code == 200:
            # Charger les données depuis la réponse JSON
            self.donnees = reponse.json()
        else:
            # Afficher un message d'erreur si la requête échoue
            print(f"Erreur de requête à l'API. Code de statut: {reponse.status_code}")

# Utilisation de la classe avec l'URL de l'API
url_api = 'https://public.opendatasoft.com/api/explore/v2.1/catalog/datasets/donnees-synop-essentielles-omm/records'
api_donnees = DataApi(url_api)

# Afficher les données brutes
if api_donnees.donnees:
    print("Données brutes:")
    print(json.dumps(api_donnees.donnees, indent=2))